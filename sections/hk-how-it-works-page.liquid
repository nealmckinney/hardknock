{% schema %}
    {
      "name": "HK How It Works Page",
      "enabled_on": {
        "templates": ["page"]
      },
      "settings": [
        {
          "type": "image_picker",
          "id": "header_image",
          "label": "Header Background Image",
          "info": "1920x1080 for standard resolution. 3840x2160 for 2x."
        },
        {
          "type": "image_picker",
          "id": "mobile_header_image",
          "label": "Mobile Header Image (optional)"
        },
        {
          "type": "text",
          "id": "header_display_title",
          "label": "Header Display Title"
        },
        {
          "type": "richtext",
          "id": "header_text",
          "label": "Header Text"
        }
      ],
      "blocks": [
        {
          "type": "image_section",
          "name": "Image Section",
          "settings": [
            {
              "type": "image_picker",
              "id": "background_image",
              "label": "Background Image"
            },
            {
              "type": "image_picker",
              "id": "mobile_background_image",
              "label": "Mobile Background Image (optional)"
            },
            {
              "type": "text",
              "id": "custom_class",
              "label": "Custom Class"
            },
            {
              "type": "checkbox",
              "id": "full_width",
              "label": "Full Width?",
              "default": false
            }
          ]
        },
        {
          "type": "text_section",
          "name": "Text Section",
          "settings": [
            {
              "type": "richtext",
              "id": "text_content",
              "label": "Text Content"
            }
          ]
        },
        {
          "type": "button_section",
          "name": "Button Section",
          "settings": [
            {
              "type": "text",
              "id": "button_label",
              "label": "Button Label"
            },
            {
              "type": "url",
              "id": "button_link",
              "label": "Button Link"
            }
          ]
        },
        {
          "type": "text_over_image",
          "name": "Text over Image",
          "settings": [
            {
              "type": "image_picker",
              "id": "background_image",
              "label": "Background Image"
            },
            {
              "type": "image_picker",
              "id": "mobile_background_image",
              "label": "Mobile Background Image (optional)"
            },
            {
              "type": "text",
              "id": "title",
              "label": "Title"
            },
            {
              "type": "richtext",
              "id": "text",
              "label": "Text"
            }
          ]
        }
      ],
      "presets": [
        {
          "name": "HK How It Works Page"
        }
      ]
    }
    {% endschema %}
    
    <section class="hk-how-it-works-page overflow-hidden relative">
      {% assign bg_image = section.settings.header_bg_image %}
      {% assign mobile_bg_image = section.settings.header_mobile_bg_image %}
    
      <picture class="hardknock-page-header__background">
        {% if mobile_bg_image != blank %}
          <source
            media="(max-width: 768px)"
            srcset="
              {{ mobile_bg_image | image_url: width: 375 }} 375w,
              {{ mobile_bg_image | image_url: width: 550 }} 550w,
              {{ mobile_bg_image | image_url: width: 750 }} 750w
            "
            sizes="100vw"
          >
        {% endif %}
        {% if bg_image != blank %}
          <source
            srcset="
              {{ bg_image | image_url: width: 750 }} 750w,
              {{ bg_image | image_url: width: 1100 }} 1100w,
              {{ bg_image | image_url: width: 1500 }} 1500w,
              {{ bg_image | image_url: width: 2000 }} 2000w
            "
            sizes="100vw"
          >
          <img
            src="{{ bg_image | image_url: width: 1500 }}"
            alt=""
            loading="eager"
            width="{{ bg_image.width }}"
            height="{{ bg_image.height }}"
            class="object-fit-cover"
          >
        {% endif %}
      </picture>
      <div class="container top-container page-width relative z-index-2">
        <div class="sub-featured-container side-margin-auto">
          <div class="header-text max-width-640 center">
            <h1 class="hardknock-page-header__title color-white mb-4">
              {{ section.settings.header_title }}
            </h1>
    
            {% if section.settings.header_text != blank %}
              <div class="hardknock-page-header__text color-white mb-5">
                {{ section.settings.header_text }}
              </div>
            {% endif %}
            {% if section.settings.nuro_badge_image != blank %}
              <div class="nuro-badge-container side-margin-auto mt-4 lg-mt-6">
                <img src="{{ section.settings.nuro_badge_image | image_url: width: 200 }}" alt="Nuro Badge" class="nuro-badge block" width="200" height="auto">
              </div>
            {% endif %}
          
          </div>

          <div class="callouts flex-container mt-6 center">
            <div class="callout">
              <img src="{{ 'icon-flex.png' | asset_url }}" alt="Flex Icon" class="icon" width="80" height="80">
              <h2 class="h6 uppercase mb-4">Flex</h2>
              <p>{{ section.settings.how_it_works_flex_text }}</p>
            </div>
            <div class="callout">
              <img src="{{ 'icon-crumple.png' | asset_url }}" alt="Crumple Icon" class="icon" width="80" height="80">
              <h2 class="h6 uppercase mb-4">Crumple</h2>
              <p>{{ section.settings.how_it_works_crumple_text }}</p>
            </div>
            <div class="callout">
              <img src="{{ 'icon-glide.png' | asset_url }}" alt="Glide Icon" class="icon" width="80" height="80">
              <h2 class="h6 uppercase mb-4">Glide</h2>
              <p>{{ section.settings.how_it_works_glide_text }}</p>
            </div>
          </div>
  
        </div>
        
      </div>

      {% for block in section.blocks %}
        {% case block.type %}
          {% when 'image_section' %}
            <section class="image-section {% if block.settings.full_width %}full-width{% endif %} {{ block.settings.custom_class }}">
              <picture>
                {% if block.settings.mobile_background_image != blank %}
                  <source
                    media="(max-width: 768px)"
                    srcset="{{ block.settings.mobile_background_image | image_url: width: 750 }}"
                  >
                {% endif %}
                {% if block.settings.background_image != blank %}
                  <img
                    src="{{ block.settings.background_image | image_url: width: 1500 }}"
                    alt=""
                    loading="lazy"
                    width="{{ block.settings.background_image.width }}"
                    height="{{ block.settings.background_image.height }}"
                  >
                {% endif %}
              </picture>
            </section>

          {% when 'text_section' %}
            <section class="text-section">
              <div class="container">
                {{ block.settings.text_content }}
              </div>
            </section>

          {% when 'button_section' %}
            <section class="button-section">
              <div class="container">
                <a href="{{ block.settings.button_link }}" class="button">
                  {{ block.settings.button_label }}
                </a>
              </div>
            </section>

          {% when 'text_over_image' %}
            <section class="text-over-image">
              <picture>
                {% if block.settings.mobile_background_image != blank %}
                  <source
                    media="(max-width: 768px)"
                    srcset="{{ block.settings.mobile_background_image | image_url: width: 750 }}"
                  >
                {% endif %}
                {% if block.settings.background_image != blank %}
                  <img
                    src="{{ block.settings.background_image | image_url: width: 1500 }}"
                    alt=""
                    loading="lazy"
                    width="{{ block.settings.background_image.width }}"
                    height="{{ block.settings.background_image.height }}"
                  >
                {% endif %}
              </picture>
              <div class="container">
                <h2>{{ block.settings.title }}</h2>
                {{ block.settings.text }}
              </div>
            </section>
        {% endcase %}
      {% endfor %}

    </section>

    
    
    <style>
      .hardknock-page-header__background {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100vh;
        z-index: 0;
      }
    
      .top-container {
        margin-top: 200px;
      }
    
      .header-text > .container {
        padding-left: 0;
        padding-right: 0;
      }

      .sub-featured-container {
        max-width: 1190px;
      }

      .callouts {
        column-gap: 24px;
      }

      .callouts .callout {
          flex: 1;
          min-width: 0;
      }

      .callouts .callout .icon {
        max-width: 60px;
        height: auto !important;
        display: block;
        margin-bottom: 20px;
      }

      @media (min-width: 1025px) {
        .top-container {
          margin-top: 400px;
        }

        .callouts .callout .icon {
          max-width: 80px;
          margin-bottom: 40px;
        }
 
      }

      .brain-injury-cause-background-image {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
      }
      
    </style>
    